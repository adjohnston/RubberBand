/*
* RubberBand Min
* A responsive web design tool
* ver - 0.1.3
* 15/08/2012
* Adam Johnston
* rubberband.adamjohnston.co.uk
*/

var rubberband=(function(i,l){var g={hideColumns:false,hideLines:false,showAlways:false,mobileLandscape:640,mobilePortrait:480,tabletLandscape:1024,tabletPortrait:768},b,p=function(t){if(typeof t==="number"){return t/b.fontSize}},r=function(t){return l.getElementById(t)},o=function(u,v){try{if(typeof v==="boolean"){localStorage.setItem(u,v)}else{return localStorage.getItem(u)}}catch(t){}},h=function(){var t,u={height:"100%",margin:0,background:"rgba(255, 255, 255, .8)"};for(t in u){if(u.hasOwnProperty(t)){r("rb-tools").style[t]=u[t]}}},s=function(){l.head.insertAdjacentHTML("beforeend",' <link rel="stylesheet" data-rel="RubberBand" href="http://adamjohnston.co.uk/rubberband/stylesheets/rubberband.min.css?v=1" media="screen" /><style data-rel="RubberBand">#rb-col-left div{right:-'+p(b.lineHeight)/2+"em}#rb-col-right div{left:-"+p(b.lineHeight)/2+"em}.rb-col{margin-left:-"+p(b.lineHeight)/2+"em}.rb-col div{border-width:0 "+p(b.lineHeight)/2+"em}</style>")},j=function(){l.body.insertAdjacentHTML("beforeend",'<div id="rb-cols"><div id="rb-col-left" class="rb-col"><div></div></div><div id="rb-col-2" class="rb-col"><div></div></div><div id="rb-col-3" class="rb-col"><div></div></div><div id="rb-col-4" class="rb-col"><div></div></div><div id="rb-col-5" class="rb-col"><div></div></div><div id="rb-col-6" class="rb-col"><div></div></div><div id="rb-col-7" class="rb-col"><div></div></div><div id="rb-col-8" class="rb-col"><div></div></div><div id="rb-col-centre" class="rb-col"><div></div></div><div id="rb-col-10" class="rb-col"><div></div></div><div id="rb-col-11" class="rb-col"><div></div></div><div id="rb-col-12" class="rb-col"><div></div></div><div id="rb-col-13" class="rb-col"><div></div></div><div id="rb-col-14" class="rb-col"><div></div></div><div id="rb-col-15" class="rb-col"><div></div></div><div id="rb-col-16" class="rb-col"><div></div></div><div id="rb-col-right" class="rb-col"><div></div></div></div><div id="rb-lines"></div><div id="rb-tools"><div id="rb-header"><img src="http://adamjohnston.co.uk/rubberband/images/logo.png" alt="RubberBand" width="152" height="51" /></div><div id="rb-guide-toggle"><h1>toggle guide</h1><div class="rb-wrapper"><button id="rb-guide-on" role="button">on</button><button id="rb-guide-off" role="button">off</button></div></div><div id="rb-view-toggle"><h1>toggle view</h1><div class="rb-wrapper"><button id="rb-view-desktop" title="view desktop" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/desktop.png" alt="desktop" width="20" height="22" /></button><button id="rb-view-tablet-portrait" title="view tablet portrait" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/tablet_portrait.png" alt="tablet portrait" width="20" height="22" /></button><button id="rb-view-tablet-landscape" title="view tablet landscape" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/tablet_landscape.png" alt="tablet landscape" width="20" height="22" /></button><button id="rb-view-mobile-portrait" title="view mobile portrait" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/mobile_portrait.png" alt="mobile portrait" width="20" height="22" /></button><button id="rb-view-mobile-landscape" title="view mobile landscape" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/mobile_landscape.png" alt="mobile landscape" width="20" height="22" /></button></div></div><div id="rb-font-size-line-height"><h1>font-size / line-height</h1><p><span id="rb-font-size">?</span> / <span id="rb-line-height">?</span></p></div><div id="rb-width-height"><h1>width / height</h1><p><span id="rb-width">?</span> / <span id="rb-height">?</span></p></div><div id="rb-calculator"><h1>calculator</h1><div class="rb-wrapper"><input id="rb-desired-font-size" placeholder="??px" /><button id="rb-calculate" title="calculate" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/calculate.png" alt="calculate" width="21" height="21" /></button></div><p>font-size : <span id="rb-new-font-size">?</span></p><p>line-height : <span id="rb-new-line-height">?</span></p><p>padding : <span id="rb-new-padding">?</span></p><p>single line : <span id="rb-new-single-line">?</span></p><textarea id="rb-new-css" placeholder="CSS will be generated here for easy copy and paste"></textarea></div></div>')},a=function(){var u=1,t="",v=(b.winHeight>b.docHeight)?b.winHeight:b.docHeight;for(u;u<=Math.floor(v/b.lineHeight);u+=1){t+="<div>"+u+"</div>"}r("rb-lines").innerHTML=t},e=function(){r("rb-width").innerHTML=b.docWidth+"px";r("rb-height").innerHTML=b.winHeight+"px";r("rb-font-size").innerHTML=b.fontSize+"px";r("rb-line-height").innerHTML=p(b.lineHeight)+"em"},k=function(x){var w=parseInt(x,10),t=w/b.fontSize,y=Math.round(t),v=((b.fontSize/w)*b.lineHeight*y)/b.fontSize,u=function(B,z,A){B=String(B).substr(0,z);B=parseFloat(B);B=B.toString()+A;return B};if(w){r("rb-new-font-size").innerHTML=u(t,6,"em");r("rb-new-line-height").innerHTML=u(v,6,"em");r("rb-new-padding").innerHTML=u((v/y)/2,6,"em");r("rb-new-single-line").innerHTML=u(b.lineHeight/b.fontSize/t,6,"em");r("rb-new-css").value="margin: "+u((b.lineHeight/b.fontSize)/t,6,"em ")+"0; padding: 0 "+u((v/y)/2,6,"em; ")+"font-size: "+u(t,6,"em; ")+"line-height: "+u(v,6,"em; ")}else{i.alert("Error! Please make sure you enter a number")}},m=function(w){var u={rbCols:r("rb-cols"),rbLines:r("rb-lines")},v,t=r("rb-guide-off"),x=r("rb-guide-on");if(w){x.className="rb-active";t.className=null}else{t.className="rb-active";x.className=null}for(v in u){if(u.hasOwnProperty(v)){if(w){u[v].style.opacity=1;u[v].style.zIndex=1000000}else{u[v].style.opacity=0;u[v].style.zIndex=-1}}}o("rbGuideOn",w)},q=function(){if(o("rbGuideOn")==="true"){m(true)}else{m(false)}},f=function(t){r("rb-"+t).style.display="none"},n=function(u){if(typeof u==="object"){var t;for(t in u){if(u.hasOwnProperty(t)){g[t]=u[t]}}(function(){var v;for(v in g){if(g.hasOwnProperty(v)){if(v==="showAlways"&&g[v]===true){h()}else{if(v==="hideColumns"&&g[v]===true){f("cols")}else{if(v==="hideLines"&&g[v]===true){f("lines")}}}}}}());return g}},d=function(){b={winHeight:i.innerHeight,docWidth:l.body.clientWidth,docHeight:l.body.clientHeight,fontSize:parseInt(i.getComputedStyle(l.body).fontSize,10),lineHeight:parseInt(i.getComputedStyle(l.body).lineHeight,10)}},c=function(z,t){var v={rbFrame:r("rb-frame"),rbOverlay:r("rb-overlay")},x,u=function(){var A=r("rb-frame");A.style.width=parseInt(t,10)+16+"px";A.style.left=(((b.docWidth-parseInt(t,10))/2)/b.docWidth)*100+"%"};if(z){if(!r("rb-frame")){l.body.insertAdjacentHTML("afterbegin",'<div id="rb-overlay"></div><iframe id="rb-frame" name="rb-frame" src="'+l.URL+'?id=rb-copy"></iframe>')}}u();for(x in v){if(v.hasOwnProperty(x)&&!z){try{l.body.removeChild(v[x]);o("rbViewOn",false)}catch(y){}}}try{localStorage.setItem("rbViewport",t)}catch(w){}};i.onload=(function(){return[d(),s(),j(),e(),a(),q()]}());i.onresize=function(){return[d(),e(),a()]};r("rb-guide-on").onclick=function(){m(true)};r("rb-guide-off").onclick=function(){m(false)};r("rb-view-desktop").onclick=function(){c(false,0)};r("rb-view-mobile-landscape").onclick=function(){c(true,g.mobileLandscape)};r("rb-view-mobile-portrait").onclick=function(){c(true,g.mobilePortrait)};r("rb-view-tablet-landscape").onclick=function(){c(true,g.tabletLandscape)};r("rb-view-tablet-portrait").onclick=function(){c(true,g.tabletPortrait)};r("rb-calculate").onclick=function(){k(r("rb-desired-font-size").value)};r("rb-desired-font-size").onkeypress=function(t){if(t.which===13){k(r("rb-desired-font-size").value)}};return{options:n,viewSettings:(function(){var t;try{t=localStorage.getItem("rbViewport")}catch(u){}if(o("rbViewOn")==="true"){c(true,t);o("rbViewOn",false)}if(i.name==="rb-frame"){r("rb-view-toggle").style.visibility="hidden";r("rb-calculator").style.visibility="hidden";r("rb-font-size-line-height").style.top="-56px";r("rb-width-height").style.top="-56px";o("rbViewOn",true)}if(r("rb-frame").contentDocument.body.clientHeight>i.innerHeight){r("rb-frame").style.width=r("rb-frame").style.width+32+"px"}return null}())}}(window,document));