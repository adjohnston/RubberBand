/*
* RubberBand Min
* A responsive web design tool
* ver - 0.1.8
* 11/09/2012
* Adam Johnston
* rubberband.adamjohnston.co.uk
*/

var rubberband=(function(i,m){var g={hideColumns:false,hideLines:false,showAlways:false,mobileLandscape:640,mobilePortrait:480,tabletLandscape:1024,tabletPortrait:768},b,q=function(u){if(typeof u==="number"){return u/b.fontSize}},s=function(u){return m.getElementById(u)},p=function(v,w){try{if(typeof w==="boolean"){localStorage.setItem(v,w)}else{return localStorage.getItem(v)}}catch(u){}},h=function(){s("rb-tools").className+="show"},t=function(){m.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",' <link rel="stylesheet" data-rel="RubberBand" href="http://adamjohnston.co.uk/rubberband/stylesheets/rubberband.min.css?v=1" media="screen" /><style data-rel="RubberBand">#rb-col-left div{right:-'+q(b.lineHeight)/2+"em}#rb-col-right div{left:-"+q(b.lineHeight)/2+"em}.rb-col{margin-left:-"+q(b.lineHeight)/2+"em}.rb-col div{border-width:0 "+q(b.lineHeight)/2+"em}</style>")},j=function(){m.body.insertAdjacentHTML("beforeend",'<div id="rb-cols"><div id="rb-col-left" class="rb-col"><div></div></div><div id="rb-col-2" class="rb-col"><div></div></div><div id="rb-col-3" class="rb-col"><div></div></div><div id="rb-col-4" class="rb-col"><div></div></div><div id="rb-col-5" class="rb-col"><div></div></div><div id="rb-col-6" class="rb-col"><div></div></div><div id="rb-col-7" class="rb-col"><div></div></div><div id="rb-col-8" class="rb-col"><div></div></div><div id="rb-col-centre" class="rb-col"><div></div></div><div id="rb-col-10" class="rb-col"><div></div></div><div id="rb-col-11" class="rb-col"><div></div></div><div id="rb-col-12" class="rb-col"><div></div></div><div id="rb-col-13" class="rb-col"><div></div></div><div id="rb-col-14" class="rb-col"><div></div></div><div id="rb-col-15" class="rb-col"><div></div></div><div id="rb-col-16" class="rb-col"><div></div></div><div id="rb-col-right" class="rb-col"><div></div></div></div><div id="rb-lines"></div><div id="rb-tools"><div id="rb-header"><img src="http://adamjohnston.co.uk/rubberband/images/logo.png" alt="RubberBand" width="152" height="51" /></div><div id="rb-guide-toggle"><h1>toggle guide</h1><div class="rb-wrapper"><button id="rb-guide-on" role="button">on</button><button id="rb-guide-off" role="button">off</button></div></div><div id="rb-view-toggle"><h1>toggle view</h1><div class="rb-wrapper"><button id="rb-view-desktop" title="view desktop" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/desktop.png" alt="desktop" width="20" height="22" /></button><button id="rb-view-tablet-portrait" title="view tablet portrait" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/tablet_portrait.png" alt="tablet portrait" width="20" height="22" /></button><button id="rb-view-tablet-landscape" title="view tablet landscape" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/tablet_landscape.png" alt="tablet landscape" width="20" height="22" /></button><button id="rb-view-mobile-portrait" title="view mobile portrait" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/mobile_portrait.png" alt="mobile portrait" width="20" height="22" /></button><button id="rb-view-mobile-landscape" title="view mobile landscape" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/mobile_landscape.png" alt="mobile landscape" width="20" height="22" /></button></div></div><div id="rb-font-size-line-height"><h1>font-size / line-height</h1><p><span id="rb-font-size">?</span> / <span id="rb-line-height">?</span></p></div><div id="rb-width-height"><h1>width / height</h1><p><span id="rb-width">?</span> / <span id="rb-height">?</span></p></div><div id="rb-calculator"><h1>calculator</h1><div class="rb-wrapper"><input id="rb-desired-font-size" placeholder="??px" /><button id="rb-calculate" title="calculate" role="button"><img src="http://adamjohnston.co.uk/rubberband/images/buttons/calculate.png" alt="calculate" width="21" height="21" /></button></div><p>font-size : <span id="rb-new-font-size">?</span></p><p>line-height : <span id="rb-new-line-height">?</span></p><p>padding : <span id="rb-new-padding">?</span></p><p>single line : <span id="rb-new-single-line">?</span></p><textarea id="rb-new-css" placeholder="CSS will be generated here for easy copy and paste"></textarea></div></div>')},a=function(){var v=1,u="",w=(b.winHeight>b.docHeight)?b.winHeight:b.docHeight;for(v;v<=Math.floor(w/b.lineHeight);v+=1){u+="<div>"+v+"</div>"}s("rb-lines").innerHTML=u},e=function(){s("rb-width").innerHTML=b.docWidth+"px";s("rb-height").innerHTML=b.winHeight+"px";s("rb-font-size").innerHTML=b.fontSize+"px";s("rb-line-height").innerHTML=String(q(b.lineHeight)).substr(0,7)+"em"},k=function(y){var x=parseInt(y,10),u=x/b.fontSize,z=Math.round(u),w=((b.fontSize/x)*b.lineHeight*z)/b.fontSize,v=function(C,A,B){C=String(C).substr(0,A);C=parseFloat(C);C=C.toString()+B;return C};if(x){s("rb-new-font-size").innerHTML=v(u,6,"em");s("rb-new-line-height").innerHTML=v(w,6,"em");s("rb-new-padding").innerHTML=v((w/z)/2,6,"em");s("rb-new-single-line").innerHTML=v(b.lineHeight/b.fontSize/u,6,"em");s("rb-new-css").value="margin: "+v((b.lineHeight/b.fontSize)/u,6,"em ")+"0; padding: 0 "+v((w/z)/2,6,"em; ")+"font-size: "+v(u,6,"em; ")+"line-height: "+v(w,6,"em; ")}else{i.alert("Error! Please make sure you enter a number")}},n=function(x){var v={rbCols:s("rb-cols"),rbLines:s("rb-lines")},w,u=s("rb-guide-off"),y=s("rb-guide-on");if(x){y.className="rb-active";u.className=null}else{u.className="rb-active";y.className=null}for(w in v){if(v.hasOwnProperty(w)){if(x){v[w].style.opacity=1;v[w].style.zIndex=1000000}else{v[w].style.opacity=0;v[w].style.zIndex=-1}}}p("rbGuideOn",x)},r=function(){if(p("rbGuideOn")==="true"){n(true)}else{n(false)}},f=function(u){s("rb-"+u).style.display="none"},l=function(u){var v=parseInt(u,10);if(i.document.body.clientHeight>i.innerHeight){v=v+16}return v},o=function(v){if(typeof v==="object"){var u;for(u in v){if(v.hasOwnProperty(u)){g[u]=v[u]}}(function(){var w;for(w in g){if(g.hasOwnProperty(w)){if(w==="showAlways"&&g[w]===true){h()}else{if(w==="hideColumns"&&g[w]===true){f("cols")}else{if(w==="hideLines"&&g[w]===true){f("lines")}}}}}}());return g}},d=function(){var v=function(){var w;try{w=i.getComputedStyle(m.body).fontSize}catch(x){w=m.body.currentStyle.fontSize}return parseInt(w,10)},u=function(){var w;try{w=i.getComputedStyle(m.body).lineHeight}catch(x){w=m.body.currentStyle.lineHeight}return parseInt(w,10)};b={winHeight:i.innerHeight,docWidth:m.body.clientWidth,docHeight:m.body.clientHeight,fontSize:v(),lineHeight:u()}},c=function(A,u){var w={rbFrame:s("rb-frame"),rbOverlay:s("rb-overlay")},y,v=function(){var B=s("rb-frame");if(B){(function(C){B.hidden=true;C()}(function(){B.style.width=l(u)+"px";B.style.left=(((b.docWidth-parseInt(u,10))/2)/b.docWidth)*100+"%";B.hidden=false}))}};if(A){if(!s("rb-frame")){m.body.insertAdjacentHTML("afterbegin",'<div id="rb-overlay"></div><iframe id="rb-frame" name="rb-frame" src="'+m.URL+'?id=rb-copy" width="0" height="0"></iframe>')}}v();for(y in w){if(w.hasOwnProperty(y)&&!A){try{m.body.removeChild(w[y]);p("rbViewOn",false)}catch(z){}}}try{localStorage.setItem("rbViewport",u)}catch(x){}};i.onload=(function(){return[d(),t(),j(),e(),a(),r()]}());i.onresize=function(){return[d(),e(),a()]};s("rb-guide-on").onclick=function(){n(true)};s("rb-guide-off").onclick=function(){n(false)};s("rb-view-desktop").onclick=function(){c(false,0)};s("rb-view-mobile-landscape").onclick=function(){c(true,g.mobileLandscape)};s("rb-view-mobile-portrait").onclick=function(){c(true,g.mobilePortrait)};s("rb-view-tablet-landscape").onclick=function(){c(true,g.tabletLandscape)};s("rb-view-tablet-portrait").onclick=function(){c(true,g.tabletPortrait)};s("rb-calculate").onclick=function(){k(s("rb-desired-font-size").value)};s("rb-desired-font-size").onkeypress=function(u){if(u.which===13){k(s("rb-desired-font-size").value)}};return{options:o,init:(function(){var u,v,x=m.getElementsByTagName("a");try{u=localStorage.getItem("rbViewport")}catch(w){}if(p("rbViewOn")==="true"){c(true,u);p("rbViewOn",false)}if(i.name==="rb-frame"){s("rb-view-toggle").style.visibility="hidden";s("rb-font-size-line-height").style.top="-56px";s("rb-calculator").style.top="-56px";s("rb-width-height").style.top="-56px";for(v in x){if(x.hasOwnProperty(v)){x[v].href="#"}}p("rbViewOn",true)}return true}())}}(window,document));